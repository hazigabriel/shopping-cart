{"ast":null,"code":"var _jsxFileName = \"/home/gabriel/Desktop/shopping-cart/src/components/cart/logic/renderCartItems.js\",\n    _s = $RefreshSig$();\n\nimport allProducts from \"../../../data/allProducts\";\nimport React, { useState, useEffect } from 'react';\nimport { FaTrashAlt } from 'react-icons/fa';\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CartItems(props) {\n  _s();\n\n  const [totalAmountDue, setTotalAmountDue] = useState(0);\n  useEffect(() => {\n    computeTotalDue();\n  }, [props.isPromoActive]);\n\n  function computeTotalDue() {\n    let temp = props.cartProducts;\n    let total = 0;\n\n    (function () {\n      temp.forEach(item => {\n        total = total + item[0].price * item[1];\n      });\n    })();\n\n    if (props.isPromoActive[0]) {\n      //check if a promotion is active, if a promo is applied calculate discount\n      let percentage = props.isPromoActive[1] / 100 * total;\n      total = total - percentage;\n    } //from here https://stackoverflow.com/questions/6134039/format-number-to-always-show-2-decimal-places\n    //setting up the total amount due with math round to show only 2 decimals from the total price\n\n\n    setTotalAmountDue((Math.round(total * 100) / 100).toFixed(2));\n  }\n\n  function decreaseQuantity(e) {\n    let currentId = e.target.parentElement.parentElement.id;\n    let newCartProducts = props.cartProducts;\n    let currentProductIndex;\n    props.cartProducts.find((item, index) => {\n      currentProductIndex = index;\n      return item[0].id === currentId;\n    });\n\n    if (newCartProducts[currentProductIndex][1] <= 1) {\n      return;\n    } else {\n      newCartProducts[currentProductIndex][1] -= 1;\n    }\n\n    computeTotalDue();\n    props.computeCartQuantity();\n    props.setCartProducts([...newCartProducts]);\n  }\n\n  function increaseQuantity(e) {\n    let currentId = e.target.parentElement.parentElement.id;\n    let newCartProducts = props.cartProducts;\n    let currentProductIndex;\n    props.cartProducts.find((item, index) => {\n      currentProductIndex = index;\n      return item[0].id === currentId;\n    });\n\n    if (newCartProducts[currentProductIndex][1] >= 99) {\n      newCartProducts[currentProductIndex][1] = 99;\n    } else {\n      newCartProducts[currentProductIndex][1] += 1;\n    }\n\n    computeTotalDue();\n    props.computeCartQuantity();\n    props.setCartProducts([...newCartProducts]);\n  }\n\n  function deleteProduct(e) {\n    let temp = props.cartProducts;\n    let idToBeRemoved = e.target.parentElement.parentElement.id;\n    let indexToBeRemoved;\n    temp.find((item, index) => {\n      indexToBeRemoved = index;\n      return item[0].id === idToBeRemoved;\n    });\n    temp.splice(indexToBeRemoved, 1);\n    props.setCartProducts([...temp]);\n    computeTotalDue();\n    props.computeCartQuantity();\n    checkIfPromoShouldRemain();\n  }\n\n  function checkPromoCode() {\n    let temp;\n    let promoCode = document.querySelector(\".promoCodeInput\").value.toUpperCase();\n    let acceptablePromoCode = [\"15OFF\", \"50OFF\", \"99OFF\"];\n\n    if (promoCode == acceptablePromoCode[0]) {\n      temp = [true, 15];\n    } else if (promoCode == acceptablePromoCode[1]) {\n      temp = [true, 50];\n    } else if (promoCode == acceptablePromoCode[2]) {\n      temp = [true, 99];\n    } else {\n      temp = [false, \"nada\"];\n    }\n\n    props.setIsPromoActive(...[temp]);\n    computeTotalDue();\n  }\n\n  function checkIfPromoShouldRemain() {\n    if (props.cartProducts.length == 0) {\n      props.setIsPromoActive([false, 'nada']);\n    }\n  }\n\n  function totalPrice() {\n    if (props.isPromoActive[0]) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"itemsTotal\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Total:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"\\u20AC\", totalAmountDue, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"discountPercent\",\n            children: [props.isPromoActive[1], \"% off\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"itemsTotal\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Total:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"\\u20AC\", totalAmountDue]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n  function updateDisplayedProduct(e) {\n    const elementIndex = e.target.parentElement.parentElement.id;\n    let temp;\n    allProducts.forEach(item => {\n      if (item.id == elementIndex) {\n        temp = item;\n      }\n    });\n    props.setIndividualProduct(temp);\n  }\n\n  function conditionalRender() {\n    if (props.cartProducts.length == 0) {\n      return /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"cartWrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cartItems\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"No products added yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"cartWrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cartItems\",\n          children: [props.cartProducts.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n            id: item[0].id,\n            className: \"cartItem\",\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              onClick: updateDisplayedProduct,\n              to: `/shopping-cart/shop/${item[0].id}`,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: item[0].image[0]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              onClick: updateDisplayedProduct,\n              to: `/shopping-cart/shop/${item[0].id}`,\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: item[0].name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"productQuantity\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                onClick: decreaseQuantity,\n                children: \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: item[1]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                onClick: increaseQuantity,\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"productPrice\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"\\u20AC\", item[0].price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"productRemove\",\n              id: item[0].id,\n              children: /*#__PURE__*/_jsxDEV(FaTrashAlt, {\n                onClick: deleteProduct\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 33\n            }, this)]\n          }, item[0].id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 29\n          }, this)), totalPrice()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"promoCodeWrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Enter promo code\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"promoCodeHint\",\n            children: [\"(use \\\"\", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"15OFF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 60\n            }, this), \"\\\" for a discount)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"promoCodeInput\",\n            type: \"text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"submitPromoCode\",\n            onClick: checkPromoCode,\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"validPromoCode\",\n            children: \"Valid code\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"invalidPromoCode\",\n            children: \"Invalid promo code\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this);\n    }\n  }\n\n  return conditionalRender();\n}\n\n_s(CartItems, \"KQofAIHGdCDOFwnAog1tP+gPsCM=\");\n\n_c = CartItems;\nexport default CartItems;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartItems\");","map":{"version":3,"sources":["/home/gabriel/Desktop/shopping-cart/src/components/cart/logic/renderCartItems.js"],"names":["allProducts","React","useState","useEffect","FaTrashAlt","Link","CartItems","props","totalAmountDue","setTotalAmountDue","computeTotalDue","isPromoActive","temp","cartProducts","total","forEach","item","price","percentage","Math","round","toFixed","decreaseQuantity","e","currentId","target","parentElement","id","newCartProducts","currentProductIndex","find","index","computeCartQuantity","setCartProducts","increaseQuantity","deleteProduct","idToBeRemoved","indexToBeRemoved","splice","checkIfPromoShouldRemain","checkPromoCode","promoCode","document","querySelector","value","toUpperCase","acceptablePromoCode","setIsPromoActive","length","totalPrice","updateDisplayedProduct","elementIndex","setIndividualProduct","conditionalRender","map","image","name"],"mappings":"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","sourcesContent":["import allProducts from \"../../../data/allProducts\"\nimport React, {useState, useEffect} from 'react';\nimport { FaTrashAlt } from 'react-icons/fa';\nimport {Link } from \"react-router-dom\"\n\nfunction CartItems(props) {\n    const [totalAmountDue, setTotalAmountDue] = useState(0)\n \n    \n    useEffect(() => {\n        computeTotalDue()\n         \n    }, [props.isPromoActive])\n\n    function computeTotalDue(){\n        let temp = props.cartProducts;\n        let total = 0;\n        \n        (function(){\n            temp.forEach(item => {\n                total = total + item[0].price *  item[1] ;\n            })\n        })()\n      \n        if(props.isPromoActive[0]) { //check if a promotion is active, if a promo is applied calculate discount\n            let percentage = (props.isPromoActive[1] / 100) * total;\n            total = total - percentage\n        }   \n        \n        //from here https://stackoverflow.com/questions/6134039/format-number-to-always-show-2-decimal-places\n        //setting up the total amount due with math round to show only 2 decimals from the total price\n        setTotalAmountDue((Math.round(total * 100) / 100).toFixed(2))\n       \n     }\n     \n    function decreaseQuantity(e){\n        let currentId = e.target.parentElement.parentElement.id;\n        let newCartProducts = props.cartProducts\n        let currentProductIndex;\n\n        props.cartProducts.find((item, index)=> {\n            currentProductIndex = index;\n            return item[0].id === currentId\n        })\n        \n\n        if(newCartProducts[currentProductIndex][1] <= 1) {\n            return\n        } else {\n            newCartProducts[currentProductIndex][1] -= 1; \n            \n        }\n        \n        computeTotalDue();\n        props.computeCartQuantity();\n        props.setCartProducts([...newCartProducts])\n     \n    }\n    function increaseQuantity(e) {\n        let currentId = e.target.parentElement.parentElement.id;\n        let newCartProducts = props.cartProducts;\n        let currentProductIndex;\n\n        props.cartProducts.find((item, index)=> {\n            currentProductIndex = index;\n            return item[0].id === currentId;\n        })\n         \n        if(newCartProducts[currentProductIndex][1] >= 99) {\n            newCartProducts[currentProductIndex][1] = 99;\n        } else {\n            newCartProducts[currentProductIndex][1] += 1; \n        }\n\n        computeTotalDue();\n        props.computeCartQuantity();\n        props.setCartProducts([...newCartProducts]);\n    }\n    function deleteProduct(e){\n        let temp = props.cartProducts;\n        let idToBeRemoved = e.target.parentElement.parentElement.id;\n        let indexToBeRemoved;\n\n        temp.find((item, index) => {\n            indexToBeRemoved = index;\n            return item[0].id === idToBeRemoved;\n        })\n\n        temp.splice(indexToBeRemoved, 1);\n        \n        props.setCartProducts([...temp]);\n        computeTotalDue();\n        props.computeCartQuantity();\n        checkIfPromoShouldRemain();\n \n    }\n    function checkPromoCode(){\n        let temp;\n\n        let promoCode = document.querySelector(\".promoCodeInput\").value.toUpperCase()\n       \n        let acceptablePromoCode = [\n            \"15OFF\",\n            \"50OFF\",\n            \"99OFF\",\n        ]\n \n        if(promoCode == acceptablePromoCode[0]) {\n            temp = [true, 15]\n        } else if(promoCode == acceptablePromoCode[1]) {\n            temp = [true, 50]\n        } else if(promoCode == acceptablePromoCode[2]) {\n            temp = [true, 99]\n        } else {\n            temp = [false, \"nada\"]\n        }\n        \n        props.setIsPromoActive(...[temp])\n        computeTotalDue()\n    } \n    function checkIfPromoShouldRemain() {\n        if(props.cartProducts.length == 0) {\n            props.setIsPromoActive([false, 'nada'])\n        }  \n    } \n    function totalPrice() {\n        if(props.isPromoActive[0]) {\n            return (\n                <div className=\"itemsTotal\">\n                            <h2>Total:</h2>\n                            <h2>\n                                €{totalAmountDue}\n                                <br></br>\n                                <span className=\"discountPercent\">\n                                    {props.isPromoActive[1]}% off\n                                </span>\n                            </h2>\n                            \n                </div>\n            )\n        } else {\n            return (\n                <div className=\"itemsTotal\">\n                            <h2>Total:</h2>\n                            <h2>\n                                €{totalAmountDue}\n                            </h2>\n                            \n                </div>\n            )\n        }\n    }\n\n    function updateDisplayedProduct(e) {\n        const elementIndex = e.target.parentElement.parentElement.id\n        let temp;\n        allProducts.forEach((item) =>{ \n            if(item.id == elementIndex) {\n                temp = item\n            }\n        })\n        props.setIndividualProduct(temp)\n    }\n\n    function conditionalRender() {\n     \n        if(props.cartProducts.length == 0) {\n            return (\n                <section className=\"cartWrapper\">\n                    <div className=\"cartItems\">\n                        <h2>No products added yet</h2>\n                    </div>\n                </section>\n            )\n        } else {\n            return (\n                <section className=\"cartWrapper\"> \n                    <div className=\"cartItems\">\n                        {props.cartProducts.map(item => (\n                            <div key={item[0].id} id={item[0].id} className=\"cartItem\"> \n                                <Link onClick={updateDisplayedProduct} to={`/shopping-cart/shop/${item[0].id}`}>\n                                    <img src={item[0].image[0]}></img>\n                                </Link>\n                                <Link onClick={updateDisplayedProduct} to={`/shopping-cart/shop/${item[0].id}`}>\n                                    <p>{item[0].name}</p>\n                                </Link>\n                                <div className=\"productQuantity\">\n                                    <h2 onClick={decreaseQuantity}>-</h2>\n                                    <h3>{item[1]}</h3>\n                                    <h2 onClick={increaseQuantity}>+</h2>\n                                </div>\n                                <div className=\"productPrice\">\n                                    <p>€{item[0].price}</p>\n                                </div>\n                                <div className=\"productRemove\" id={item[0].id}>\n                                    <FaTrashAlt onClick={deleteProduct}/>\n                                </div>\n                            </div>\n                        ))}\n                        {totalPrice()}\n                    </div>\n                    <div className=\"promoCodeWrapper\">\n                        <h3>Enter promo code</h3>\n                        <p className=\"promoCodeHint\">(use \"<span>15OFF</span>\" for a discount)</p> \n                        <input className=\"promoCodeInput\" type=\"text\"></input>\n                        <p className=\"submitPromoCode\" onClick={checkPromoCode}>Submit</p>\n                        <p className=\"validPromoCode\">Valid code</p>\n                        <p className=\"invalidPromoCode\">Invalid promo code</p>\n                    </div>     \n                </section>\n            )\n        }\n    }\n \n    \n    return (\n        conditionalRender()\n    )\n}\n\nexport default CartItems"]},"metadata":{},"sourceType":"module"}